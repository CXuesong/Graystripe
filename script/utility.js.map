{"version":3,"sources":["script/utility.ts"],"names":[],"mappings":"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","file":"utility.js","sourcesContent":["/// <reference path=\"../../typings/index.d.ts\"/>\r\n\r\nexport class NetError extends Error {\r\n    public constructor(public readonly status: string, public readonly statusCode: number, public readonly url?: string) {\r\n        super(`Network error when requesting \"${url}\": ${status}. [${statusCode}]`);\r\n    }\r\n\r\n    public get IsBadRequest() { return this.statusCode >= 400 && this.statusCode <= 499; }\r\n}\r\n\r\nexport class ResourceMissingError extends Error {\r\n    public constructor(public readonly resourceId: any, public readonly resourceType: string) {\r\n        super(`Cannot find the specified ${resourceType}: \"${resourceId}\".`);\r\n    }\r\n}\r\n\r\nexport function getJson(url: string): JQueryPromise<any> {\r\n    let d = $.Deferred();\r\n    $.getJSON(url).then(data => d.resolve(data),\r\n        (xhr, status, err) => d.reject(new NetError(err || status, xhr.status, url)));\r\n    return d;\r\n}\r\n\r\nexport function htmlEscape(unsafe: string) {\r\n    return unsafe\r\n        .replace(/&/g, \"&amp;\")\r\n        .replace(/</g, \"&lt;\")\r\n        .replace(/>/g, \"&gt;\")\r\n        .replace(/\"/g, \"&quot;\")\r\n        .replace(/'/g, \"&#039;\");\r\n}\r\n\r\nexport function formatString(format: string, ...args: any[]): string;\r\nexport function formatString() {\r\n    let content = arguments[0];\r\n    for (let i = 1; i < arguments.length; i++) {\r\n        let replacement = new RegExp(\"\\\\{\" + (i - 1) + \"\\\\}\", \"g\");\r\n        content = content.replace(replacement, htmlEscape(arguments[i]));\r\n    }\r\n    return content;\r\n}\r\n\r\nexport function resolvePropertyPath(obj: any, path: string): any;\r\nexport function resolvePropertyPath(obj: any, pathSegments: string[]): any;\r\nexport function resolvePropertyPath(obj: any, pathOrSegments: string | string[]): any;\r\nexport function resolvePropertyPath(obj: any, path: any) {\r\n    let v = obj;\r\n    let seg = path instanceof Array ? path : path.split(\"/\");\r\n    for (let i = 0; i < seg.length; i++) {\r\n        v = v[seg[i]];\r\n        if (v === undefined || v === null) return v;\r\n    }\r\n    return v;\r\n}\r\n\r\n/**\r\n * fileName.ext --> fileNameSuffix.ext\r\n */\r\nexport function fileNameAddSuffix(fileName: string, suffix: string) {\r\n    let pos = fileName.lastIndexOf(\".\");\r\n    if (pos < 0) return fileName + suffix;\r\n    return fileName.substring(0, pos) + suffix + fileName.substring(pos);\r\n}\r\n\r\nexport function XmlToString(element: Node) {\r\n    let a = <any>element;\r\n    if (a.xml !== undefined) return a.xml;\r\n    if (XMLSerializer) return (new XMLSerializer()).serializeToString(element);\r\n    throw new TypeError(\"Cannot convert XML to string.\");\r\n}\r\n\r\nexport function delayAsync(milliseconds: number): JQueryPromise<void> {\r\n    let d = $.Deferred<void>();\r\n    setTimeout(function () {\r\n        d.resolve();\r\n    }, milliseconds);\r\n    return d;\r\n}\r\n"]}